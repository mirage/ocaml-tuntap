<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Tuntap (tuntap.Tuntap)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">tuntap</a> &#x00BB; Tuntap</nav><header class="odoc-preamble"><h1>Module <code><span>Tuntap</span></code></h1><p>Module for dealing with TUN/TAP devices. TUN refers to layer 3 virtual interfaces whereas TAP refers to layer 2 ones.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-opentun"><a href="#val-opentun" class="anchor"></a><code><span><span class="keyword">val</span> opentun : 
  <span><span class="optlabel">?pi</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?persist</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?user</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?group</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?devname</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Unix</span>.file_descr * string</span></code></div><div class="spec-doc"><p><code>opentun ~pi ~persist ~user ~group ~devname ()</code> will create a TUN interface. If <code>devname</code> is specified, or if <code>devname</code> specifies a nonexistent device, a new device will be created, otherwise, the interface <code>devname</code> will be opened. <code>pi</code> is to indicate if you want packet information associated with your frames (tap) or packets (tun) (defaults to no information). <code>persist</code> will set the device persistent with permissions set to <code>user</code> and <code>group</code> if supported by your OS (currently macOS does not support it). The return value is a pair consisting of a fd opened on the freshly created interface, and its name as will be displayed by command <code>ifconfig</code> for example.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-opentap"><a href="#val-opentap" class="anchor"></a><code><span><span class="keyword">val</span> opentap : 
  <span><span class="optlabel">?pi</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?persist</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?user</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?group</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?devname</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">Unix</span>.file_descr * string</span></code></div><div class="spec-doc"><p>Like <code>opentun</code>, but open TAP interfaces instead of TUN ones.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-closetun"><a href="#val-closetun" class="anchor"></a><code><span><span class="keyword">val</span> closetun : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>closetun devname kind</code> will destroy <code>devname</code>, if it exists.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-closetap"><a href="#val-closetap" class="anchor"></a><code><span><span class="keyword">val</span> closetap : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Like <code>closetun</code>, but for TAP interfaces.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_ifnamsiz"><a href="#val-get_ifnamsiz" class="anchor"></a><code><span><span class="keyword">val</span> get_ifnamsiz : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_ifnamsiz ()</code> is the value of the constant IFNAMSIZ, defined in &lt;net/if.h&gt;. Useful for allocating buffers that contain interface names.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_macaddr"><a href="#val-get_macaddr" class="anchor"></a><code><span><span class="keyword">val</span> get_macaddr : <span>string <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Macaddr</span>.t</span></code></div><div class="spec-doc"><p><code>get_hwaddr devname</code> is the MAC address of interface <code>devname</code>, as a raw string (not hexa).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_mtu"><a href="#val-get_mtu" class="anchor"></a><code><span><span class="keyword">val</span> get_mtu : <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>get_mtu devname</code> is the MTU of interface <code>devname</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_ipv4"><a href="#val-set_ipv4" class="anchor"></a><code><span><span class="keyword">val</span> set_ipv4 : <span><span class="optlabel">?netmask</span>:<span class="xref-unresolved">Ipaddr</span>.V4.Prefix.t <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ipaddr</span>.V4.t <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_ipv4 ~netmask dev ipaddr</code> assigns an <code>ipaddr</code> to interface <code>dev</code>, with associated netmask <code>netmask</code> if specified. If unspecified, the kernel will assign a default netmask automatically.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_up_and_running"><a href="#val-set_up_and_running" class="anchor"></a><code><span><span class="keyword">val</span> set_up_and_running : <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>set_up_and_running devname</code> sets interface <code>devname</code> up and running. Note that when using the <code>set_ipv4</code> function, the interface will automatically be set up and running.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getifaddrs"><a href="#val-getifaddrs" class="anchor"></a><code><span><span class="keyword">val</span> getifaddrs : 
  <span>unit <span class="arrow">&#45;&gt;</span></span>
  <span><span>(string * <span>[ <span>`V4 of <span class="xref-unresolved">Ipaddr</span>.V4.Prefix.t</span> <span><span>| `V6</span> of <span class="xref-unresolved">Ipaddr</span>.V6.Prefix.t</span> ]</span>)</span> list</span></span></code></div><div class="spec-doc"><p><code>getifaddrs ()</code> is the list that associates interface names with IP addresses and prefix. Only interfaces that have an IP address assigned are returned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getifaddrs_v4"><a href="#val-getifaddrs_v4" class="anchor"></a><code><span><span class="keyword">val</span> getifaddrs_v4 : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <span class="xref-unresolved">Ipaddr</span>.V4.Prefix.t)</span> list</span></span></code></div><div class="spec-doc"><p>Same as <code>getifaddrs</code> but only return interfaces that have an IPv4 assigned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-getifaddrs_v6"><a href="#val-getifaddrs_v6" class="anchor"></a><code><span><span class="keyword">val</span> getifaddrs_v6 : <span>unit <span class="arrow">&#45;&gt;</span></span> <span><span>(string * <span class="xref-unresolved">Ipaddr</span>.V6.Prefix.t)</span> list</span></span></code></div><div class="spec-doc"><p>Same as <code>getifaddrs</code> but only return interfaces that have an IPv6 assigned.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-addrs_of_ifname"><a href="#val-addrs_of_ifname" class="anchor"></a><code><span><span class="keyword">val</span> addrs_of_ifname : 
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>[ <span>`V4 of <span class="xref-unresolved">Ipaddr</span>.V4.Prefix.t</span> <span><span>| `V6</span> of <span class="xref-unresolved">Ipaddr</span>.V6.Prefix.t</span> ]</span> list</span></span></code></div><div class="spec-doc"><p><code>addrs_of_ifname ifname</code> is the list of IP addresses and their prefixes associated to interface <code>ifname</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-v4_of_ifname"><a href="#val-v4_of_ifname" class="anchor"></a><code><span><span class="keyword">val</span> v4_of_ifname : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ipaddr</span>.V4.Prefix.t list</span></span></code></div><div class="spec-doc"><p><code>v4_of_ifname ifname</code> is the list of IPv4 addresses and their prefixes associated to interface <code>ifname</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-v6_of_ifname"><a href="#val-v6_of_ifname" class="anchor"></a><code><span><span class="keyword">val</span> v6_of_ifname : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Ipaddr</span>.V6.Prefix.t list</span></span></code></div><div class="spec-doc"><p><code>v6_of_ifname ifname</code> is the list of IPv6 addresses and their prefixes associated to interface <code>ifname</code>.</p></div></div></div></body></html>
